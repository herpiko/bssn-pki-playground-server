<!DOCTYPE html>
<html>
<body>

<h1>BSSN PKI Playground</h1>
<p>Hello!</p>
Extension ID : <input id="extid"><br/>
commonName : <input id="commonName" value="herpiko"><br/>
countryName : <input id="countryName" value="ID"><br/>
stateName : <input id="stateName" value="ID"><br/>
localityName : <input id="localityName" value="Jakarta"><br/>
organizationName : <input id="organizationName" value="BlankOn"><br/>
organizationUnit : <input id="organizationUnit" value="Riset"><br/>
<button onclick="invoke()">Submit to extension</button>
<script>
  function invoke() {
    var extid = document.getElementById('extid').value;
    var record = {
            notAfter : new Date(),
            notBefore : new Date(),
            subject : {
                    commonName : document.getElementById('commonName').value,
                    countryName : document.getElementById('countryName').value,
                    stateName : document.getElementById('stateName').value,
                    localityName : document.getElementById('localityName').value,
                    organizationName : document.getElementById('organizationName').value,
                    organizationUnit : document.getElementById('organizationUnit').value,
            }
    }
    record.notBefore.setFullYear(record.notBefore.getFullYear() + 1);
    console.log(extid);
    chrome.runtime.sendMessage(extid, {action:'csr-request', record : record}, function(response) {
     // do nothing
    });
  }
</script>

</body>
</html>
